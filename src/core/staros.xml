<?xml version="1.0" encoding="UTF-8"?>
<!--StarOS Entry-->
<starosxml xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/function_callback.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/restfulapi/staros_api_map.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/websocket/staros_websocket_map.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/gui/staros_onos_gui.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/openflow/openflow_app.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/openflow/openflow_topology.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/setting/setting.xml"/>
	<!--qiulei 20170811-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/CDeviceManager.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/port_manager.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/CFlowManager.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/localcall/localcall.xml"/>
	<!--hupeng 20170804-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/host_manager.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/globalresource.xml"/>
	<variable name="openflowserverobj" type="object" global="true"/>
	<variable name="restfulserver" type="object" global="true"/>
	<container name="flowmodcontaier" type="hashmap" keytype="string" valuetype="hashmap" global="true"/>
	<container name="websocketclients" type="list" valuetype="string" global="true"/>
		<!--qiulei 20170802-->
	<container name="sessionIdContainer" type="hashmap" keytype="long" valuetype="hashmap" global="true"/>
	<variable name="flowmanager" type="class"/>
	<variable name="nullbundleappid" type="long"/>
	<logconfig dest="stdout|file" filename="/opt/staros.xyz/staroscontroller/logs/starosapps.log" logturnoff="false"/>
	<function name="startnullapp">
		<set name="nullbundleappid" value="context.newBundleId()"/>
		<createbundle bundleid="nullbundleappid" src="/opt/staros.xyz/staroscontroller/starlang/apps/nullapp/nullapp.xml"/>
	</function>
	<events>
		<!--Session StarUp-->
		<onevent event="bundleapp.startup">
		  <variable name="calloutSession" type="long"/>
		  <variable name="outjson" type="string"/>
		  <variable name="injson" type="string"/>
		  <function>
			<set name="injson" value="'[]'"/>
			<log>##########STAROS application start#######</log>
			<localcall method="hellotest" inparam="context.injson" outparam="context.outjson"/>
			<log><![CDATA[ localcall output value <%=context.outjson.toString()%>]]></log>
			<remotecall method="DiscoveryTestMethod">
					<applicationdata>
						<![CDATA[ 
						hello world;
						]]>
					</applicationdata>
			</remotecall>
			<wait event="hellorequest" timeout="1000"/>
			<!--Init Flow Manager -->
			<new name="flowmanager" class="CFlowManager"/>
			<!--Add API Handler Init-->
			
<function name="InitGlobalResource"/>
						<function name="InitAPIMapFunction"/>
			<!--hu peng 2017/07/28  change setting-->
			<function name="InitSetting"/>
			<function name="InitWebSocketHandlerMap"/>
			<!--Start GUI and Restful API Service-->
			<function name="Restfulserver"/>
				<!--Start OpenFlow Controller protocol-->
			<function name="startopenflow"/>
			<function name="testcallback"/>
			<function name="addhostest"/>
		  <function name="startnullapp"/>
		  </function>
		</onevent>
		<!--Session Shutdown-->
		<onevent event="~bundleapp.shutdown">
		  <function>
			<log>##########~bundleapp.shutdown#######</log>
		  </function>
		</onevent>
	</events>
</starosxml>