<?xml version="1.0" encoding="UTF-8"?>
<starosxml xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<!--Restful API Service-->
	<class name="CRestfulAPIEntry">
		<private>
			<variable name="m_bundleid" type="long" />
			<variable name="m_eventname" type="string" />
			<variable name="m_restfullurl" type="string" />
		</private>
		<public>
			<function name="CRestfulAPIEntry">
				<parameters>
					<parameter name="bundleid" type="long"/>			
					<parameter name="eventname" type="string"/>
					<parameter name="restfullurl" type="string"/>			
				</parameters>
				<set name="thisclass.m_bundleid" value="context.bundleid"/>
				<set name="thisclass.m_eventname" value="context.eventname.toString()"/>
				<set name="thisclass.m_restfullurl" value="context.restfullurl.toString()"/>
			</function>
			
			<!--qiulei 20170824 pm-->
			<function name="GetAPIInfo">
				<parameters>
					<!--return eventname-->
					<parameter name="eventname" type="string"/>
					<!--return bundleid-->
					<parameter name="bundleid" type="long"/>
				</parameters>
				<set name="eventname" value="thisclass.m_eventname"/>
				<set name="bundleid" value="thisclass.m_bundleid"/>
			</function>
			
		</public>
	</class>
	<class name="CRestfulAPIManager">
		<private>
			<container name="restfulapiContainer" type="hashmap" keytype="string" valuetype="class"/>
		</private>
		<public>
			<function name="CRestfulAPIManager">
				<log>CRestfulAPIManager is create</log>
			</function>
			<function name="AddAPIHandler">
				<parameters>
					<parameter name="requestpath2222" type="string"/>
					<parameter name="handler" type="class"/>
				</parameters>
				<insert name="restfulapiContainer" key="context.requestpath2222.toString()" value="context.handler"/>
			</function>
			<function name="RemoveAPIHandler">
				<parameters>
					<parameter name="requestpath" type="string"/>
				</parameters>
				<remove name="restfulapiContainer" key="context.requestpath.toString()"/>
			</function>
			<function name="GetHandler">
				<parameters>
					<parameter name="requestpath" type="string"/>
					<parameter name="handler" type="class"/>
				</parameters>
				<variable name="apientry" type="class"/>
				<if cond="thisclass.restfulapiContainer.hasValue(context.reqestpath.toString())">
					<then>
						<function>
							<set name="handler" value="thisclass.restfulapiContainer.getValue(context.reqestpath.toString())"/>
						</function>
					</then>
				</if>
			</function>
		</public>
	</class>
</starosxml>