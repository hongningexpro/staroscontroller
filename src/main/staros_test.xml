<?xml version="1.0" encoding="UTF-8"?>
<!--StarOS Entry-->
<starlang xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/function_callback.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/gui/staros_http.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/setting/setting.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_app.xml"/>
	<!--qiulei 20170811-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/localcall/localcall.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/resource/global_resource.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/define.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/utils.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/oxm_match_fields_map.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/actions_map.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/instrunction_map.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/utils/group_type_map.xml"/>
	
	<!--qiulei 20170929-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/apidocs/apidocs.xml"/>
	
	
	<object name="openflowserverobj"  global="true"/>
	<object name="restfulserver"  global="true"/>
	
	<logconfig dest="stdout" level="0" filename="/opt/staros.xyz/staroscontroller/logs/starosapps.log" logturnoff="false"/>
	<boolean name="isAPIAuth"  value="false"/>
	<events>
		<!--Session StarUp-->
		<onevent event="bundleapp.startup">
			<long name="calloutSession" />
			<string name="outjson"/>
			<string name="injson" />
			<!--qiulei 20170828 Monday-->
			<string name="eventname"/>
			<function>
				<set name="injson" value="'[]'"/>
				<log level="100">##########STAROS application start#######</log>
				<localcall method="hellotest" inparam="context.injson" outparam="context.outjson"/>
				<log><![CDATA[ localcall output value <%=context.outjson.toString()%>]]></log>
				<remotecall method="DiscoveryTestMethod">
						<applicationdata>
							<![CDATA[ 
							hello world;
							]]>
						</applicationdata>
				</remotecall>
				<wait event="hellorequest" timeout="1000"/>
				<function name="InitGlobalResource"/>
				<function name="InitAPIMapFunction"/>
				<!--hu peng 2017/07/28  change setting-->
				<function name="InitSetting"/>
				<function name="InitWebSocketHandlerMap"/>
				<!--Start GUI and Restful API Service-->
				<function name="testcallback"/>
				<!--function name="addhostest"/-->
				<!--function name="startnullapp"/-->
				<!--InitOpenFlow OXM Match Filed Map-->
				<function name="InitOXMMatchFieldMap"/>
				<function name="InitOXMMatchFieldNameMap"/>
				<function name="InitInstrunctionMap"/>
				<function name="InitActionsMap"/>
				<function name="InitActionsNameMap"/>



			</function>
		</onevent>
		<!--Session Shutdown-->
		<onevent event="~bundleapp.shutdown">
		  <function>
			<log>##########~bundleapp.shutdown#######</log>
			
			<!--qiulei 201700929 Monday-->
			<function name="DestoryRemoveDocsAPITopology"/>
		  </function>
		</onevent>
		
		<!--qiulei 20170828 Monday-->
		<onevent event="TimeOutEvent">
			<function >
				<log>staros TimeOutEvent 2017.08.28</log>
				<function name="OpenFlowDetect"/>
				<function name="Timeout" class="SessionManager"/>
				<long name="toposize" />	
				<function name="GettopoSize" class="TopoManager">
					<parameters>
						<long name="toposize" out="context.toposize"/>
					</parameters>
				</function>
				<log leve="1"><![CDATA[toposize= '<%=context.toposize.toString()%>']]></log>
			<!--wait event="InvalidEvent" timeout="2000"/-->
				<!--raise name="'TimeOutEvent'"/-->
			</function>
		</onevent>
	</events>
</starlang>