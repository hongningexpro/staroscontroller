<?xml version="1.0" encoding="UTF-8"?>
<starlang xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<function name="OpenFlowMultiPartMeterRequest">
		<parameters>
			<long name="xid" />
		</parameters>
		<log>OpenFlowMultiPartMeterRequest</log>
		<string name="strjson"/>
		<reference variable="strjson">
			<jsonbody><![CDATA[ 
					{
						"xid":"<%=context.xid.toLong()%>",
						"flags":"0",
						"meterid":"0xffffffff"
					}
			]]></jsonbody>
		</reference>
		<function name="Send_OFPT13_MULTIPART_REQUEST.OFP13MP_METER">
			<parameters>
				<string name="transportid"  in="event.getParam('transportid').toString()"/>
				<string name="strjson"  in="context.strjson.toString()"/>
			</parameters>
		</function>
	</function>
	<function name="OpenFlowMultiPartMeterReply">
		<parameters>
			<long name="xid" />
		</parameters>
		<log>OpenFlowMultiPartMeterReply</log>
		<string name="strjson"/>
		<reference variable="strjson">
			<jsonbody><![CDATA[ 
				{
					"flags" : "0",
					"meterstatslist" : [
						{
							"meterid":"1",
							"flowcount":"2",
							"packetincount":"2",
							"byteincount":"1",
							"durationsec":"1",
							"durationnsec":"1",
							"bandstatslist":[
								{
									"packetbandcount":"1",
									"bytebandcount":"2"
								},
								{
									"packetbandcount":"3",
									"bytebandcount":"4"
								}
							]
						}
					],
					"type" : "9",
					"xid":"<%=context.xid.toLong()%>"
				}
			]]></jsonbody>
		</reference>
		<function name="Send_OFPT13_MULTIPART_REPLY.OFP13MP_METER">
			<parameters>
				<string name="transportid"  in="event.getParam('transportid').toString()"/>
				<string name="strjson"  in="context.strjson.toString()"/>
			</parameters>
		</function>
	</function>
	<function name="TestOpenFlowMultiPartMeterRequest">
		<boolean name="isstop" value="true"/>
		<long name="xid"/>
		<set name="xid" value="context.openflowserverobj.ptr.getIncreaseXID()"/>
		<function>
			<function name="OpenFlowMultiPartMeterRequest">
			<parameters>
					<long name="xid"  in="context.xid.toLong()"/>
				</parameters>
			</function>
			<wait event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_METER,openflow.OFPT13_ERROR" transportid="event.getParam('transportid').toString()" xid="context.xid.toLong()">
				<function>
					<log><![CDATA[OFPT13_MULTIPART_REPLY.OFP13MP_METER=<%=event.getParam('eventdata').toString()%>]]></log>
				</function>
			</wait>
		</function>
	</function>
	<function name="TestOpenFlowMultiPartMeterReply">
		<long name="xid" />
		<set name="xid" value="context.openflowserverobj.ptr.getIncreaseXID()"/>
		<function>
			<function name="OpenFlowMultiPartMeterReply">
				<parameters>
					<long name="xid"  in="context.xid.toLong()"/>
				</parameters>
			</function>
		</function>
	</function>
</starlang>