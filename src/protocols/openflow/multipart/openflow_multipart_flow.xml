<?xml version="1.0" encoding="UTF-8"?>
<starlang xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<function name="OpenFlowMultiPartFlowRequest">
		<parameters>
			<long name="xid"/>
			<string name="transportid"/>
		</parameters>
		<log>OpenFlowMultiPartFlowRequest</log>
		<string name="strjson"/>
		<reference variable="strjson">
			<jsonbody><![CDATA[ 
					{
						"xid":"<%=context.xid.toLong()%>",
						"tableid":"0xff",
						"outport":"0xffffffff",
						"outgroup":"0xffffffff",
						"cookie":"0",
						"cookiemask":"0",
						"match":{
								"type":"1"
							}
					}
			]]></jsonbody>
		</reference>
		<function name="Send_OFPT13_MULTIPART_REQUEST.OFP13MP_FLOW">
			<parameters>
				<string name="transportid" in="context.transportid.toString()"/>
				<string name="strjson" in="context.strjson.toString()"/>
			</parameters>
		</function>
	</function>
	<function name="OpenFlowMultiPartFlowReply">
		<parameters>
			<long name="xid"/>
		</parameters>
		<log>OpenFlowMultiPartFlowReply</log>
		<string name="strjson"/>
		<reference variable="strjson">
			<jsonbody><![CDATA[ 
					{
						"xid":"<%=context.xid.toLong()%>",
						"statslist":[
							{
								"tableid":"1",
								"durationsec":"1",
								"durationnsec":"1",
								"priority":"1",
								"idletimeout":"1",
								"hardtimeout":"1",
								"flags":"2",
								"cookie":"3",
								"packetcount":"4",
								"bytecount":"5",
								"match":{
										"type":"1",
										"matchfieldlist":[
											{
												"oxmclass":"0x8000",
												"oxmfield":"5",
												"hasmask":"false",
												"ethtype":"0x0806"
											},
											{
												"oxmclass":"0x8000",
												"oxmfield":"3",
												"hasmask":"true",
												"dstmac":"00:0c:29:58:ef:2a",
												"dstmacmask":"ff:ff:ff:00:00:00"
											}
										]
									},
								"instructionlist":[
									{
										"type":"4",
										"actionlist":[
											{
												"type":"25",
												"oxmclass":"0x8000",
												"oxmfield":"3",
												"hasmask":"false",
												"dstmac":"00:0c:29:58:ef:22"
											},
											{
												"type":"0",
												"outport":"0xfffffffd",
												"maxlen":"0xffff"
											}
										]
									},
									{
										"type":"1",
										"tableid":"1"
									}
								]
							}
						]
					}
			]]></jsonbody>
		</reference>
		<function name="Send_OFPT13_MULTIPART_REPLY.OFP13MP_FLOW">
			<parameters>
				<string name="transportid" in="event.getParam('transportid').toString()"/>
				<string name="strjson" in="context.strjson.toString()"/>
			</parameters>
		</function>
	</function>
	<function name="TestOpenFlowMultiPartFlowRequest">
		<boolean name="isstop" value="true"/>
		<long name="xid"/>
		<set name="xid" value="context.openflowserverobj.ptr.getIncreaseXID()"/>
		<log><![CDATA[TestOpenFlowMultiPartFlowRequest xid=<%=context.xid.toLong()%>]]></log>
		<function>
			<function name="OpenFlowMultiPartFlowRequest">
				<parameters>
					<long name="xid" in="context.xid.toLong()"/>
				</parameters>
			</function>
			<wait event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_FLOW,openflow.OFPT13_ERROR" transportid="event.getParam('transportid').toString()" xid="context.xid.toLong()">
				<function>
					<log><![CDATA[OFPT13_MULTIPART_REPLY.OFP13MP_FLOW=<%=event.getParam('eventdata').toString()%>]]></log>
				</function>
			</wait>
		</function>
	</function>
	<function name="TestOpenFlowMultiPartFlowReply">
		<boolean name="isstop" value="true"/>
		<long name="xid"/>
		<set name="xid" value="context.openflowserverobj.ptr.getIncreaseXID()"/>
		<log><![CDATA[TestOpenFlowMultiPartFlowReply xid=<%=context.xid.toLong()%>]]></log>
		<function>
			<function name="OpenFlowMultiPartFlowReply">
				<parameters>
					<long name="xid" in="context.xid.toLong()"/>
				</parameters>
			</function>
		</function>
	</function>
</starlang>