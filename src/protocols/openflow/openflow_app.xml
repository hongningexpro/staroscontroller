<?xml version="1.0" encoding="UTF-8"?>
<starosxml xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<!--OpenFlow Protocol-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/api/openflow_api.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_portdesc.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_table_features.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_meter_features.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_meter_config.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_meter.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_group_features.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_group_desc.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_group.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_queue.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_desc.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_flow.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_aggregate.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_table.xml"/>
	<!--qiulei  2017/0712-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/multipart/openflow_multipart_port_stats.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/symmetricmsg/openflow_hello.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/symmetricmsg/openflow_echo.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/controllertoswitch/openflow_barrier_msg.xml"/>
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/controllertoswitch/openflow_handshake.xml"/>
	<!--qiulei 2017/07/18-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_detect.xml"/>
	<!--qiulei 2017/08/22 Tuesday pm -->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/controllertoswitch/openflow_packet_out.xml"/>
	
	<!--YY 2017/07/19-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_switch.xml"/>
	<!--YY 2017/07/27-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_defaultconfig.xml"/>
	<!--qiulei 20170829-->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_topology.xml"/>
	
	<!-- wangkang 2017/09/01 -->
	<include src="/opt/staros.xyz/staroscontroller/starlang/protocols/openflow/openflow_error_handler.xml"/>
	
	<!--include src="/opt/staros.xyz/staros/starlang/unittest/openflow_unittest.xml"/-->
	<variable name="openflowxidbase" type="long" value="0"/>
	<container name="switchmap" type="hashmap" keytype="string" valuetype="long"/>
	<function name="startopenflow">
		<variable name="openflowparams" type="params"/>
		<!--hu peng 2017/07/28-->
		<set name="openflowparams" paramname="listenip" value="context.GlobalSetting.getParam('openflowip').toString()"/>
		<set name="openflowparams" paramname="listenport" value="context.GlobalSetting.getParam('openflowopenflowport').toString()"/>
		<set name="openflowparams" paramname="protocol" value="context.GlobalSetting.getParam('openflowprotocol').toString()"/>
		<set name="openflowparams" paramname="cerfile" value="context.GlobalSetting.getParam('openflowcerfile').toString()"/>
		<set name="openflowparams" paramname="keyfile" value="context.GlobalSetting.getParam('openflowkeyfile').toString()"/>
		<openflow name="openflowserverobj" method="SERVER" params="context.openflowparams" connectevent="openflow.Connected" disconnectedevent ="openflow.Disconnected"/>
		
	</function>
	
	<events>
		<onevent event="openflow.Connected">
			<variable name="jsonbody" type="string"/>
			<variable name="openflowparams" type="params"/>
			<variable name="openflowdevice" type="object"/>
			<variable name="localipaddr" type="string"/>
			<variable name="peeripaddr" type="string"/>
			<variable name="masterid" type="string"/>
				<function>
					<set name="localipaddr" value="event.getParam('localipaddr').toString()"/>
					<set name="peeripaddr" value="event.getParam('peeripaddr').toString()"/>
					<set name="masterid" value="event.getParam('masterid').toString()"/>
					<log><![CDATA[localipaddr=<%=context.localipaddr.toString()%>]]></log>
					<log><![CDATA[peeripaddr=<%=context.peeripaddr.toString()%>]]></log>
					<set name="openflowparams" paramname="transportid" value="event.getParam('transportid').toString()"/>
					<log>openflow.Connected</log>
					<set name="openflowdevice" value="context.openflowserverobj.getDevice(event.getParam('transportid').toString())"/>
					<!--hu peng 2017/07/28-->
					<script><![CDATA[
						var localip = context.localipaddr.toString();
						var localips = localip.split(":");
						if(localips.length!=0){
							var local=localips[0];
							context.localipaddr.setValue(local);
						}
					]]></script>
							
					<script><![CDATA[context.openflowdevice.setParam('transportid',event.getParam('transportid').toString());]]></script>
					<script><![CDATA[context.openflowdevice.setParam('localipaddr',context.localipaddr.toString());]]></script>
					<script><![CDATA[context.openflowdevice.setParam('peeripaddr',event.getParam('peeripaddr').toString());]]></script>
					<script><![CDATA[context.openflowdevice.setParam('masterid',context.localipaddr.toString());]]></script>
					<!--YY 2017-08-03-->
					<!--function name="switchOnline">
						<parameters>
							<parameter name="device" type="object" in="context.openflowdevice"/>			
						</parameters>
					</function>
					
					<function name="addDevice">
						<parameters>
							<parameter name="deviceobject" type="object" in="context.openflowdevice"/>			
						</parameters>
					</function-->
				</function>
		</onevent>
		<onevent event="openflow.Disconnected">
			<variable name="openflowdevice" type="object"/>
			<variable name="disconnectSession" type="long" value="-1"/>
			<variable name="localipaddr" type="string"/>
			<variable name="peeripaddr" type="string"/>
			<function>
				<set name="localipaddr" value="event.getParam('localipaddr').toString()"/>
				<set name="peeripaddr" value="event.getParam('peeripaddr').toString()"/>
				<set name="openflowdevice" value="context.openflowserverobj.getDevice(event.getParam('transportid').toString())"/>
				<log><![CDATA[localipaddr=<%=context.localipaddr.toString()%>]]></log>
				<log><![CDATA[peeripaddr=<%=context.peeripaddr.toString()%>]]></log>
				<log dest="stdout">openflow.Disconnected</log>
				<!--YY 2017-08-03-->
				<function name="removeDeviceByTransportId" class="DeviceManager">
					<parameters>
						<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>			
					</parameters>
				</function>
			<script><![CDATA[context.openflowserverobj.destroyDeviceChannel(event.getParam('transportid').toString())]]></script>
			</function>
		</onevent>
		<!-- 0 -->
		<onevent event="openflow.OFPT13_HELLO">
		  <variable name="switchSessionid"/>
		  <variable name="jsonvariable" type="string"/>
		  <variable name="jsonvariablefeatures" type="string"/>
		  <variable name="isstop" type="boolean" value="true"/>
		  <variable name="openflowdevice" type="object"/>
		  <variable name="port" type="object"/>
		  <function>
			<log dest="stdout">Get a Hello Message</log>
			<set name="openflowdevice" value="context.openflowserverobj.getDevice(event.getParam('transportid').toString())"/>
			<set name="port" value="context.openflowdevice.getPort('1')"/>
			<if cond="context.port==null">
				<then>
					<log>!!!!!!!!!!!!!!!!!!!!!</log>
				</then>
			</if>
			<function name="OpenFlowHello">
				<parameters>
					<parameter name="xid" type="long" in="context.openflowserverobj.getIncreaseXID()"/>
				</parameters>
			</function>
			<function name="OpenFlowFeatures"/>
			<!--openflow method="DISCONNECT" params="context.openflowparams"/-->
			<!--20160630 qiulei test openflow_mod -->
			<!--function name="OpenFlowMod"/-->
			<!--function name="OpenFlowUnittest"/-->
			<!--function name="TestOpenFlowMultiPartPortDescRequest"/-->
			
			<!--YY 2017/07/27-->
			<function name="DefaultConfig"/>
			<!--YY 2017/07/27-->
			
			<!--qiulei 2017/07/20
			<log dest="stdout">执行InstallDefaultFlow 2017.7.20</log>
			<function name="InstallDefaultFlow"/>-->
			<!--qiulei 2017/07/21-->
			<!--<function name="InstallFlowTableRequest"/> -->
		  </function>
		</onevent>
		<onevent event="openflow.OFPT13_HELLO2">
		  <variable name="switchSessionid"/>
		  <variable name="jsonvariable" type="string"/>
		  <variable name="jsonvariablefeatures" type="string"/>
		  <variable name="isstop" type="boolean" value="true"/>
		  <variable name="openflowdevice" type="object"/>
		  <variable name="port" type="object"/>
		  <function>
			<log dest="stdout">Get a Hello Message</log>
			<set name="openflowdevice" value="context.openflowserverobj.getDevice(event.getParam('transportid').toString())"/>
			<set name="port" value="context.openflowdevice.getPort('1')"/>
			<function name="OpenFlowHello">
				<parameters>
					<parameter name="xid" type="long" in="context.openflowserverobj.getIncreaseXID()"/>
				</parameters>
			</function>
			<function name="OpenFlowFeaturesRequest">
				<parameters>
					<parameter name="xid" type="long" in="context.openflowserverobj.getIncreaseXID()"/>
				</parameters>
			</function>
			<!--openflow method="DISCONNECT" params="context.openflowparams"/-->
			<!--20160630 qiulei test openflow_mod -->
			<!--function name="OpenFlowMod"/-->
			<!--function name="OpenFlowUnittest"/-->
			
			<while cond="context.isstop.toBoolean()==true">
				<function>
					<function name="TestOpenFlowMultiPartPortDescRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartTableFeaturesRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartMeterFeaturesRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartMeterConfigRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartMeterConfigReply"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartMeterRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartMeterReply"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartGroupFeaturesRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartGroupDescRequest"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartGroupDescReply"/>
					<function name="SendBarrierRequest"/>
					<function name="TestOpenFlowMultiPartGroupRequest"/>
					<function name="TestOpenFlowMultiPartGroupReply"/>
					<function name="TestOpenFlowMultiPartQueueRequest"/>
					<function name="TestOpenFlowMultiPartQueueReply"/>
					<function name="TestOpenFlowMultiPartDescRequest"/>
					<function name="TestOpenFlowMultiPartDescReply"/>
					<function name="TestOpenFlowMultiPartFlowRequest"/>
					<function name="TestOpenFlowMultiPartFlowReply"/>
					<function name="TestOpenFlowMultiPartAggregateRequest"/>
					<function name="TestOpenFlowMultiPartAggregateReply"/>
					<!--qiulei 20170712-->
					<function name="TestOpenFlowMultiPartPortStatsRequest"/>
					<function name="TestOpenFlowMultiPartPortStatsReply"/>
					
					<!-- YY -->
					<function name="TestOpenFlowMultiPartTableRequest"/>
					<function name="TestOpenFlowMultiPartTableReply"/>
					
					<set name="isstop" value="false"/>
				</function>
			</while>
		  </function>
		</onevent>
		<!-- 1 -->

		<onevent event="openflow.OFPT13_ERROR">
			<log>####################################</log>
			<variable name="switchSessionid"/>
			
			<variable name="messagetype" type="string"/>
			<function>
				<log dest="stdout">Get a Error Message</log>
				<log>####################################</log>
				<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
				<log>####################################</log>
				<script><![CDATA[
							var info = JSON.parse(event.getParam('eventdata').toString());
							if(info.body != null)
							{
								context.messagetype.setValue(info.body.type);
							}
							else
							{
								context.messagetype.setValue('');
							}
				]]></script>
				<log><![CDATA[messagetype=<%=context.messagetype.toString()%>]]></log>
				<if cond="context.messagetype.toString() == '14'">
					<then>
						<function name="ErrorHandleFlowMod"/>
					</then>
				</if>
				<if cond="context.messagetype.toString() == '15'">
					<then>
						<function name="ErrorHandleGroupMod"/>
					</then>
				</if>
				<if cond="context.messagetype.toString() == '29'">
					<then>
						<function name="ErrorHandleMeterMod"/>
					</then>
				</if>
			</function>
		</onevent>
		<!-- 2 -->
		<!--qiulei 20170808 15:27-->
		<onevent event="openflow.OFPT13_ECHO_REPLY">
			<container name="deviceinfo" type="hashmap" keytype="string" valuetype="string"/>
			<for var="context.deviceinfo" in="context.deviceContainer">
				<function>					
					<if cond="context.deviceinfo.getValue('transportid').toString() == event.getParam('transportid').toString()">
						<then>
							<function>
								<remove name="deviceinfo" key="'requestcount'"/>
								<insert name="deviceinfo" key="'requestcount'" value="'0'"/>
							</function>
						</then>
					</if>
				</function>
			</for>
		</onevent>
		
		<onevent event="openflow.OFPT13_ECHO_REQUEST">
			<variable name="switchSessionid"/>
			<variable name="echorequestxid" type="long"/>
			<variable name="strjson" type="string"/>
			<variable name="openflowdevice" type="object"/>
			<variable name="port" type="object"/>
			
			<function>
				<log dest="stdout">Get a EchoRequest Message</log>
				<set name="openflowdevice" value="context.openflowserverobj.getDevice(event.getParam('transportid').toString())"/>
				<log><![CDATA[getShortestPath=<%=context.openflowserverobj.getShortestPath('1','3')%>]]></log>
				<function>
					<log dest="stdout">Get a EchoRequest Message</log>
					<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
					<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
						<script><![CDATA[
							var info = JSON.parse(event.getParam('eventdata').toString());
							context.echorequestxid.setValue(info.xid);
						]]></script>
					<reference variable="strjson">
						<jsonbody><![CDATA[ 
						{
						"xid":"<%=context.echorequestxid.toLong()%>"
						}
						]]></jsonbody>
					</reference>
					<function name="Send_OFPT13_ECHO_REPLY">
						<parameters>
							<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
							<parameter name="strjson" type="string" in="context.strjson.toString()"/>
						</parameters>
					</function>
					
				</function>
			</function>
		</onevent>
		<!-- 4 -->
		<onevent event="openflow.OFPT13_EXPERIMENTER">
		  <function>
		  </function>
		</onevent>
		<!-- 5 -->
		<onevent event="openflow.OFPT13_FEATURES_REQUEST">
		  <function>
			<log dest="stdout">Get a FeaturesRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 6 -->
		<onevent event="openflow.OFPT13_FEATURES_REPLY">
		  <function>
			<log dest="stdout">Get a FeaturesReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 7 -->
		<onevent event="openflow.OFPT13_GET_CONFIG_REQUEST">
		  <function>
			<log dest="stdout">Get a GetConfigRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 8 -->
		<onevent event="openflow.OFPT13_GET_CONFIG_REPLY">
		  <function>
			<log dest="stdout">Get a GetConfigReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 9 -->
		<onevent event="openflow.OFPT13_SET_CONFIG">
		  <function>
			<log dest="stdout">Get a SetConfig Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 10 -->
		<onevent event="openflow.OFPT13_PACKET_IN">
		  <function>
			<log dest="stdout">Get a PacketIn Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
			<variable name="datapathid" type="string"/>
			<function name="GetDatapathIdByTransportid" class="DeviceManager">
				<parameters>
					<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
					<parameter name="datapathid" type="string" out="context.datapathid"/>
				</parameters>
			</function>	
			<function name="ProcessPacket" class="PacketService">
				<parameters>
					<parameter name="strjson" type="string" in="event.getParam('eventdata').toString()"/>
					<parameter name="datapathid" type="string" in="context.datapathid.toString()"/>	
					<parameter name="msgblock" type="messageblock" in="event.getMessageBlock()"/>						
				</parameters>
			</function>
		  </function>
		</onevent>
		<!-- 11 -->
		<onevent event="openflow.OFPT13_FLOW_REMOVED">
		  <function>
			<log dest="stdout">Get a FlowRemoved Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 12 -->
		<onevent event="openflow.OFPT13_PORT_STATUS">
		  <function>
			<log dest="stdout">Get a PortStatus Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 13 -->
		<onevent event="openflow.OFPT13_PACKET_OUT">
		  <function>
			<log dest="stdout">Get a PacketOut Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 14 -->
		<onevent event="openflow.OFPT13_FLOW_MOD">
		  <function>
			<log dest="stdout">Get a FlowMod Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 15 -->
		<onevent event="openflow.OFPT13_GROUP_MOD">
		  <function>
			<log dest="stdout">Get a GroupMod Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 16 -->
		<onevent event="openflow.OFPT13_PORT_MOD">
		  <function>
			<log dest="stdout">Get a PortMod Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 17 -->
		<onevent event="openflow.OFPT13_TABLE_MOD">
		  <function>
			<log dest="stdout">Get a TableMod Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 18 -->
		<onevent event="openflow.OFPT13_MULTIPART_REQUEST ">
		  <function>
			<log dest="stdout">Get a MultipartRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 19 -->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY">
		  <function>
			<log dest="stdout">Get a MultipartReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 20 -->
		<onevent event="openflow.OFPT13_BARRIER_REQUEST">
		  <function>
			<log dest="stdout">Get a BarrierRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 21 -->
		<onevent event="openflow.OFPT13_BARRIER_REPLY">
		  <function>
			<log dest="stdout">Get a BarrierReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 22 -->
		<onevent event="openflow.OFPT13_QUEUE_GET_CONFIG_REQUEST">
		  <function>
			<log dest="stdout">Get a QueueGetConfigRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 23 -->
		<onevent event="openflow.OFPT13_QUEUE_GET_CONFIG_REPLY">
		  <function>
			<log dest="stdout">Get a QueueGetConfigReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 24 -->
		<onevent event="openflow.OFPT13_ROLE_REQUEST">
		  <function>
			<log dest="stdout">Get a RoleRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 25 -->
		<onevent event="openflow.OFPT13_ROLE_REPLY">
		  <function>
			<log dest="stdout">Get a RoleReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 26 -->
		<onevent event="openflow.OFPT13_GET_ASYNC_REQUEST">
		  <function>
			<log dest="stdout">Get a GetAsyncRequest Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 27 -->
		<onevent event="openflow.OFPT13_GET_ASYNC_REPLY">
		  <function>
			<log dest="stdout">Get a GetAsyncReply Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!-- 28 -->
		<onevent event="openflow.OFPT13_SET_ASYNC">
		  <function>
			<log dest="stdout">Get a SetAsync Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
						<!--Reply 13-0-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_DESC">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_DESC Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>

<!--Reply 13-1-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_FLOW">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_FLOW Message</log>
			<variable name="deviceobj" type="class"/>
			<function name="GetDeviceByTransportId" class="DeviceManager">
		  <parameters>
			<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
			<parameter name="onedeviceobj" type="class" out="context.deviceobj"/>
			</parameters>
		  </function>
		<if cond="context.deviceobj != null">
		  <then>
		  <function>
			<function name="HandleOpenFlowMultiPartFlowResponse" class="context.deviceobj">			<parameters>
			<parameter name="flowjson" type="string" in="event.getParam('eventdata').toString()"/>
		  </parameters>
		  </function>
		</function>
		</then>
		</if>
		  </function>
		</onevent>
		<!--Reply 13-2-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_AGGREGATE">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_AGGREGATE Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-3-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_TABLE">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_TABLE Message</log>
			<variable name="deviceobj" type="class"/>
			<function name="GetDeviceByTransportId" class="DeviceManager">
				<parameters>
					<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
					<parameter name="onedeviceobj" type="class" out="context.deviceobj"/>
				</parameters>
			</function>
			
<if cond="context.deviceobj != null">
			
<then>
		  <function>
		<function name="SetTableJson" class="context.deviceobj">
		  <parameters>
			<parameter name="tablejson" type="string" in="event.getParam('eventdata').toString()"/>
			</parameters>
			</function>
		  </function>
		</then>
		</if>
		  </function>
		</onevent>
		<!--Reply 13-4-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_PORT_STATS">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_PORT_STATS Message</log>
			<variable name="deviceobj" type="class"/>
			<function name="GetDeviceByTransportId" class="DeviceManager">
		  <parameters>
			<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
			<parameter name="onedeviceobj" type="class" out="context.deviceobj"/>
			</parameters>
		  </function>
		<if cond="context.deviceobj != null">
			<then>
				<function>
					<function name="HandlePortStateResponse" class="context.deviceobj">
					  	<parameters>
							<parameter name="portstatejson" type="string" in="event.getParam('eventdata').toString()"/>
						</parameters>
					</function>
				  </function>
			</then>
		</if>
		  </function>
		</onevent>
		<!--Reply 13-5-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_QUEUE">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_QUEUE Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-6-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_GROUP">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_GROUP Message</log>
			<variable name="deviceobj" type="class"/>
			<function name="GetDeviceByTransportId" class="DeviceManager">
		  <parameters>
			<parameter name="transportid" type="string" in="event.getParam('transportid').toString()"/>
			<parameter name="onedeviceobj" type="class" out="context.deviceobj"/>
			</parameters>
		  </function>
		<if cond="context.deviceobj != null">
		<then>
		  <function>
			<function name="HandleGroupStateResponse" class="context.deviceobj">			<parameters>
								<parameter name="groupjson" type="string" in="event.getParam('eventdata').toString()"/>
			</parameters>
		  </function>
		</function>
		</then>
		</if>
		  </function>
		</onevent>
		<!--Reply 13-7-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_GROUP_DESC">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_GROUP_DESC Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-8-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_GROUP_FEATURES">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_GROUP_FEATURES Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-9-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_METER">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_METER Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-10-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_METER_CONFIG">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_METER_CONFIG Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-11-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_METER_FEATURES">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_METER_FEATURES Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-12-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_TABLE_FEATURES">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_TABLE_FEATURES Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
		<!--Reply 13-13-->
		<onevent event="openflow.OFPT13_MULTIPART_REPLY.OFP13MP_PORT_DESC">
		  <function>
			<log dest="stdout">Get a MultipartReply.OFP13MP_PORT_DESC Message</log>
			<log><![CDATA[transportid=<%=event.getParam('transportid').toString()%>]]></log>
			<log><![CDATA[eventdata=<%=event.getParam('eventdata').toString()%>]]></log>
		  </function>
		</onevent>
	</events>
</starosxml>