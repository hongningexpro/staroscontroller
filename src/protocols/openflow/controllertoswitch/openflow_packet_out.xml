<?xml version="1.0" encoding="UTF-8"?>
<starlang xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
<!--
	Author:
			qiulei
	Date:
			2017/08/22 Tuesday pm
	Copyright: 
			Nanjing StarOS Inc. All rights reserved.
-->
	<function name="SendOpenFlowPacketOut">
		<parameters>
			<string name="outputport"/>
			<string name="payloadjson"/>
			<string name="transportid"/>
			<!--qiulei 2017.08.22 pm-->
			<messageblock name="msgblock"/>
		</parameters>
		<log>-- SendOpenFlowPacketOut 2017.08.22 Tuesday pm --</log>
		<string name="modstrjson"/>
		
		<reference variable="modstrjson">
			<jsonbody><![CDATA[ 
					{
						"xid":"<%=context.openflowserverobj.ptr.getIncreaseXID().toString()%>",
						"bufferid":"0xffffffff",
						"inport":"0xfffffffd",
						"actionlist":[
							{
								"type":"0",
								"outport":"<%=context.outputport.toString()%>",
								"maxlen":"0xffff"
							}
						],
						"payload":<%=context.payloadjson.toString()%>
					}
			]]></jsonbody>
		</reference>
		
		<log><![CDATA[modstrjson =<%=context.modstrjson.toString()%>]]></log>
		<function name="Send_OFPT13_PACKET_OUT">
			<parameters>
				<string name="transportid" in="context.transportid.toString()"/>
				<string name="strjson" in="context.modstrjson.toString()"/>
				<!--qiulei 2017.08.22-->
				<messageblock name="msgblock" in="context.msgblock"/>
			</parameters>
		</function>
	</function>
</starlang>