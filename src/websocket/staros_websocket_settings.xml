<?xml version="1.0" encoding="UTF-8"?>
<starosxml xmlns="http://www.staros.xyz/starcore/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" scope="application">
	<function name="HandleSettingsRequest">
		<variable name="settingsjson" type="string"/>
		<variable name="outjson" type="string"/>
		<function name="GetAllSettingJson" class="gSettingsManager">	
			<parameters>
				<parameter name="outjson" type="string" out="context.settingsjson"/>
			</parameters>
		</function>	
		<script><![CDATA[
				var json = new Object();
				var payload = new Object();
				var apps = new Array();
				json['event'] = "settingDataResponse";
				var settingsinfo=JSON.parse(context.settingsjson.toString());
				payload['settings'] = settingsinfo;	
				json['payload'] = payload;	
				var strjson=JSON.stringify(json);
				context.outjson.setValue(strjson);
			]]></script>
		<websocket name="restfulserver" method="SendText" transportid="event.getParam('transportid').toString()">
			<jsonsrc src="outjson"/>
		</websocket>
	</function>
</starosxml>